<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HoneyCombo</title>
    <link rel="stylesheet" type="text/css" href="/src/css/productMain.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>
<header>
    <div class="container d-flex mt-2">
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="p-2">
                <a href="/index">
                    <div class='logo-wrapper'>
                        <img class='img' src="/static/logo.png" width="200" height="90">
                    </div>
                </a>
            </div>
            <div class="p-2">
                <ul>
                    <li><a class="nav-a one text-dark ml-2 mr-5" href="/product/main" style="text-decoration:none"><h4>상품</h4></a></li>
                    <li><a class="nav-a two text-dark ml-3" href="/recipe/mainRecipe" style="text-decoration:none"><h4>레시피</h4></a></li>
                    <hr id="nav_hr">
                </ul>
            </div>

            <div class="ml-auto p-4 mt-2">
                <% if (isLoggedin)  { %>
                    <h6 class="d-inline mt-1">userID님 반가워요 :)</h6>&nbsp;
                    <a class="btn btn-primary" id="logout" href="/auth/logout">로그아웃</a>
                    <a class="btn btn-primary" id="dropout" href="/auth/dropout">회원탈퇴</a>
                <% } %>
                <% if (!isLoggedin)  { %>
                    <div>
                        <a class="btn btn-primary" id="login" href="/auth/login">로그인</a>
                        <a class="btn btn-primary" id="signup" href="/auth/signup">회원가입</a>
                    </div>
                <% } %>
            </div>
        </nav>
    </div>
</header>
<main>
    <div class="container">
        <!--상품 검색-->
        <div class="product-Search text-center">
            <div class="row justify-content-center mt-5 mb-3">
                <img src="/static/product_icon.png" width="50" height="50">
                <h4 class="small-title align-center mx-3 mt-2">편의점 상품</h4>
            </div>
            <div class="row justify-content-center">
                <form class="form-inline">
                    <input type="text" name="itemName" class="form-control" placeholder="상품명을 입력하세요">
                    <button class="btn btn-primary" id="searchButton">검색</button>
                </form>
            </div>
        </div>
        <!--상품 필터링-->
        <div class="product-sort mt-5 mb-1 align-self-center">
            <div class="row justify-content-around">
                <div class="col-xs align-self-center">
                    <img src="/static/filter.png" width="32" height="32">
                    <h5 class="align-center mx-3 mt-2 d-inline">필터</h5>
                </div>
                <div class="col-xs ml-5 align-self-center">
                    <span style="font-size:1.2rem">편의점별</span>
                    <button class="btn btn-default ml-2" name="CU"><img src="/static/cu.png" width=60 height=40 alt="cu_logo"></button>
                    <button class="btn btn-default" name="GS"><img src="/static/gs25.png" width=72 height=28 alt="cu_logo"></button>
                </div>
                <div class="col-xs ml-5 align-self-center">
                    <span style="font-size:1.2rem">가격순</span>
                    <button class="btn btn-outline-primary ml-3" name="high">높은 가격 순</button>
                    <button class="btn btn-outline-primary" name="low">낮은 가격 순</button>
                </div>
            </div>
        </div>
        <!--상품 나열-->
        <div class="product-content">
            <hr>
            <% if(items != null && items.length > 0){ %>
                <%console.log(items.length)%>
                <% var repeatNum = Math.floor(items.length/3) %>
                <% for ( var x = 0; x <= repeatNum; x++){ %> <!--row num-->
                        <div class="row mt-5 justify-content-center">
                            <% if(x == repeatNum){ %>  <!--마지막 줄일 경우-->
                                <% var colNum = 0 %>
                                <% switch(items.length%3){
                                    case(0):
                                        colNum = 2;
                                        break;
                                    case(1):
                                        colNum = 0;
                                        break;
                                    case(2):
                                        colNum = 1;
                                        break;
                               }%>
                            <% }else{ %> <!--마지막 줄 아닐 경우-->
                                <% var colNum = 2 %>
                            <% } %>
                            <% for ( var y = 0; y <= colNum; y++){ %> <!--col num-->
                            <div class="col-md-4 mr-auto">
                                <div class="item ml-5">
                                    <div class="card mb-4 p-2">
                                        <% var i = 3*x+y %>
                                        <% var imgSrc = '/images/' + items[i].IMGFILENAME %>
                                        <% console.log(imgSrc) %>
                                        <img class="card-img-top" src="<%= imgSrc %>" style="height: 187px; width: 80%; display: block;">
                                        <div class="card-body">
                                            <small class="text-muted"><%= items[i].COMPANY %></small>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <p class="card-text"><%= items[i].ITEMNAME %></p>
                                                <p style="color:rgb(255, 145, 0)"><%= items[i].ITEMPRICE %>원</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <% } %>
                        </div>
                <% } %>
            <% } else { %>
                <p>상품 없음</p>
            <% } %>
            <!--TODO: 더보기 버튼: for 문 안에 넣어서 처리 해야-->
            <div class="row justify-content-center">
                <a href="#" id="moreButton"><img src="/static/expand-button.png" width=50 height=50 alt="더보기"></a>
            </div>
        </div>
    </div>

    <footer class="text-muted text-center">
        <hr class="featurette-divider ">
        <p class="float-right">
            <a href="#">Back to top</a>
        </p>
        <p class="text-left">오픈SW플랫폼 Team17 이소망, 이채은, 최희조</p>
    </footer>
</main>

</body>
<script type="module" src="/src/js/productMain.js"></script>
</html>